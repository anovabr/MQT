---
output: html_document
editor_options: 
  chunk_output_type: console
---

# O R e o Tidyverse

Este livro é totalmente feito no R, com utilização do RStudio e diversos pacotes para otimizar as análises estatísticas apresentadas. Muito provavelmente, esta escolha é ainda uma excessão no universo da Psicologia, que utiliza o SPSS e outros programas *point and click* com frequência. Uma série de razões motivaram a minha escola e, entre elas:

* o R é uma linguagem de programação desenvolvida especificamente para Estatística.  
    + Diferente de uma linguagem mais geral (por exemplo, Python) ou de um programa point and click, que serve como uma ponte entre estatística e a usabilidade (SPSS ou STATA), o R é feito para que a pessoa tenha controle total das ações estatísticas. Apesar disso poder assustar no início, julgo que essa característica do R é essencial, inclusive, para que o usuário planeje adequadamente as análises de interesse, em vez de apenas selecionar parte de um output padronizado, como ocorre com o SPSS. Além disso, como o R tem um nicho em Estatística, ele é absolutamente mais adaptado para o dia-a-dia em estatística do que o Python, que tem vantagem em aplicações variadas.

* o R e todas as suas otimizações são gratuitas  
    + Todo ambiente R é gratuito e isso inclui o Rstudio (que é uma IDE, Integrated Development Environment) e seus pacotes.   

* Pacotes  
    + A comunidade R tem um exército de pacotes que foram desenvolvidos para otimizar análises estatísticas e foram verificados publicamente e estão disponíveis no CRAN (The Comprehensive R Archive Network). Todos os capítulos deste livro contam com pacotes e eles permitem realizar ações altamente complexas com poucos comandos.

* Comunidade de apoio  
    + Os usuários do R formam uma rede muito dinâmica e que oferece grande apoio em caso das mais diversas dúvidas. Um grande exemplo é o stackoverflow, que funciona como um grande centro de suporte e auxílio.


## Tidyverse  

  O Tidyverse é um ambiente integrado de pacotes que, além de funcionarem de maneira totalmente integrada, permitem que as linhas de código que fazemos para programar no R se tornem mais intuitivas e mais próximas à forma que temos de pensar, em que primeiro vem o sujeito e depois o verbo. Será possível notar que durante este livro, frequentemente eu vou utilizar uma função de ligação (o pipe, %>% ) em vez da estrutura do R-Base, que será usada apenas minoritariamente aqui. Ao instalar o tidyverse `install.package("tidyvese")`, todos os pacotes abaixo ficam disponíveis no R.


![](./img/tidyverse_website.PNG)


No entanto, nem tudo são flores. Apesar do R e seus pacotes oferecem excelentes ferramentas para análise de dados, algumas condições descritivas são demasiadamente custosas. Por exemplo, enquanto realizar algumas tabelas e gráficos no Excel é tremendamente fácil, as vezes o R exige diversas linhas de código. Nesse sentido, na relação entre dificuldade e complexidade, o R sai na frente em tarefas complexas (como exemplo, estimar os coeficientes de um modelo não-linear), mas talvez perca em tarefas fáceis (por exemplo, gerar uma tabela de contingência).

![](./img/excel_r.PNG)

Uma outra barreira muito importante do R é que ele é uma linguagem de programação e isso gera uma dificuldade a mais na docência de estatística, especialmente aos alunos de graduação. Tendo em vista que é muito esperado que estes estudantes tenham algum receio em relação à estatística, apresentar o R traria ainda uma outra dificuldade, que é entender e aprender a programar. Em situações como esta, talvez o ideal seja começar motivando o estudante a entender como a estatística é uma ferramenta importante para tomar decisões em relação a pergutas de pesquisa para só depois, lentamente, apresentar aspectos matemáticos e computacionais.

## Verbos do dplyr

O dplyr funciona de maneira muito intuitiva. O padrão original do R considera que as operações são realizadas a partir de uma lógica do tipo `verbo(sujeito, complemento)` enquanto o ambiente tidyverse opta por `sujeito %>% verbo(complemento)`, tornando-se o ato de programar mais natural e associado à maneira que organizamos as ideias. 

Os verbos principais do pacote estão listados na tabela a seguir e as sintaxes deixadas no decorrer deste capítulo (e do livro) permitem uma melhor apreensão das funcionalidades. É importante lembrar que, em alguns momentos, em função da praticidade computacional, algumas sintaxes vão contar com o formato base do R.



| Verbo         | Ação          |
| :------------ | :-----------: |
| glimpse       | Inspeciona os dados |
| count         | Conta os níveis de uma variável |
| select        | seleciona uma variável específica |
| filter        | Filtra os resultados por um nível específico de uma variável |
| group_by      | Agrupa os resultados por níveis de uma variávei específica |
| summarise     | Apresenta sumários (com medidas estatísticas)  |
| mutate        | Cria novas variáveis ou altera as existentes  |
| arrange       | Organiza a apresentação dos resultados  |
| left_join     | Junta bases ou colunas  |
| pivot_longer        | Transforma uma base larga em longa  |
| pivot_wider        | Transforma uma base longa em larga  |



É também importante ficar atento às atualizações do dplyr e do sistema tidyverse como um todo. Eventualmente, mudanças podem ocorrer e impossibilitar (ou dificultar) a reprodução de rotinas antigas. O [site](https://www.tidyverse.org/) é o local ideal para acompanhar as atualizações. 

